# Outofbox Skins Sync

Удобная работа с файлами шаблонов outofbox.ru.

По-умолчанию outofbox.ru предлагает возможность редактировать файлы шаблонов прямо в браузере, что не всегда удобно
при интенсивной разработке. Данное ПО позволяет синхронизировать файлы из локального каталога.

При необходимости можно настроить скачивание измененных файлов с сервера в локальный каталог.

## Ограничения

Внимание! В приложении нет встроенной защиты от параллельных запросов! Если два и более человек работают над одним и тем
же шаблоном, то файл будет переписан тем содержимым, что было отправлено на сервер позже. Учитывайте это при разработке и
по необходимости пользуйтесь системами контроля версий и другими способами деплоя файлов-шаблонов.

## Установка

```
npm install -g outofbox-skins-sync
```

## Запуск

```
outofbox-skins-sync path/to/config.yml
```

## Конфигурация

Пример конфига есть в `config.yml.dist`:

```
watch:
    path: '.'

sync:
    base_uri: 'http://outofbox-domain.tld/_api/skins/skin-name/files/'
    token: ~
    #ignored:
    #    - /(^|[\/\\])\../
    #    - /node_modules/
    #since_file: 'sync_since.dist'
```

`watch.path` – путь до каталога, в котором надо отслеживать изменения, может быть либо абсолютным путём, либо относительным.
Относительные пути будут строиться от расположения файла конфигурации.

`sync.base_uri` – путь до API шаблона

`sync.token` – секретный токен. Получить его можно в административной панеле вашему сайта на платформе outofbox.ru

`sync.ignored` – ([anymatch](https://github.com/es128/anymatch)-совместимое выражение) - список для игнорирования файлов/каталогов.
По-умолчанию, если этот список не задан, будут игнорироваться все файлы с точкой в начале (например, `.gitignore`) и каталог `node_modules`

`sync.since_file` – если указан путь до файла, то приложение будет помнить дату последнего скачивания файлов с сервера.
При запуске приложения из файла будет извлечена дата последнего скачивания файлов и все изменения с этой даты будут скачаны
в локальных каталог. Пример формата даты можно найти в файле `sync_since.dist` в этом репозитории.